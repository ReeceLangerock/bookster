<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Bookster</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

</head>
<html>


<body>
    <div class='container'>
        <!--import navbar -->
        <% if (authenticatedUser) { %>
        <%- include ./partials/authNavigation.ejs %>
        <%  } else { %>
        <%- include ./partials/navigation.ejs %>
        <%  } %>
        <main>
          <div>
            <div>
            <h1>Your Trade Requests <%=userData.requestsSent.length %></h1>
          </div>
          <h1>Your Pending Requests <%=userData.requestsPending.length %></h1>
          <div>
          pending requests
        </div>
          </div>
          <div class = "userPageContainer">

            <div class = 'addBookContainer'>
            <form method = "POST" action = '/user'>
            <div class = 'bookItem'>
            <input type = "text" name = "bookTitle" value = "Book Title">
              <input type = "submit">
            </form>

            </div>
            <% if(bookData) { %>
            <% for(var i = 0; i < bookData.length; i++){ %>
            <% var imgURL = "null" %>
            <% if(typeof bookData[i].volumeInfo.imageLinks != "undefined") {%>
            <% imgURL = bookData[i].volumeInfo.imageLinks.smallThumbnail %>
            <% } %>
              <div class = "bookItem">

                <form method = "POST" action = '/user/add-book'>
                <p><%=bookData[i].volumeInfo.title %></p>
                <img src = "<%=imgURL %>">

                  <input type= "hidden" name="bookTitle" value="<%=bookData[i].volumeInfo.title %>">
                  <input type= "hidden" name="bookAuthor" value="<%=bookData[i].volumeInfo.authors %>">
                  <input type= "hidden" name="bookImageUrl" value="<%=imgURL %>">
                  <input type= "hidden" name="bookID" value="<%=bookData[i].id %>">
                  <input type = "submit" value = "add book">
              </form>
            </div>
        <%    } %>
        <%    } %>
      </div>

      <div class = 'userBookContainer'>
      <% if(userBooks) { %>
        <% for(var i = 0; i < userBooks.length; i++){ %>
          <div class = "bookItem">
            <h1><%=userBooks[i].title %></h1>
            <img src = "<%=userBooks[i].bookImageURL %>">
            <p>by: <%=userBooks[i].author %></p>

          </div>


            <% } %>
              <% } %>
            </div>

            </div>
              <div id="myModal" class="modal">

              <!-- Modal content -->
              <div class="modal-content">
                  <form action="/add-pin" method="post">
                      <span class="close">&times;</span>
                      <input class='modal-input' type="text" placeholder="image url" name="image_url" required><br>
                      <input class='modal-input' type="text" placeholder="image title" name="image_title" required><br>
                      <input class='modal-input' type="text" placeholder="image description" name="image_description"><br><br>
                      <input type="submit" value="Submit">
                  </form>

              </div>
              </div>

        </main>

</body>
<!--import footer -->
<%- include ./partials/footer.ejs %>

</html>
